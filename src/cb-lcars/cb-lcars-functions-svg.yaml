cb-lcars-functions-svg:
  variables:
    __memoize: |
      [[[
        return function(fn) {
          const cache = new Map();
          return function(...args) {
            const key = JSON.stringify(args);
            if (cache.has(key)) return cache.get(key);
            const result = fn.apply(this, args);
            cache.set(key, result);
            return result;
          }
        }
      ]]]
    get_memoized_svg: |
      [[[
        // Returns a memoized version of any function in variables by name
        return function(fnName) {
          if (!this._memoized_svgs) this._memoized_svgs = {};
          if (!this._memoized_svgs[fnName]) {
            variables.__cblcarsLog("debug",`Memoized svg [${fnName}] was not found - will generate.`,this._memoized_gauge_svg);
            this._memoized_svgs[fnName] = variables.__memoize(variables[fnName]);
          } else {
            variables.__cblcarsLog("debug",`Found and will use memoized svg [${fnName}]`,this._memoized_gauge_svg);
          }
          return this._memoized_svgs[fnName];
        }
      ]]]
