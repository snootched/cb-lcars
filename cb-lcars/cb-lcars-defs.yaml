cb-lcars-defs:
  triggers_update:
    - '[[[ return variables.___helpers.alert_condition ]]]'

  variables:
    ___helpers:
      alert_condition: input_select.lcars_ui_alert_condition
    __defs:
      font_url: >-
        https://fonts.googleapis.com/css2?family=Antonio:wght@100..700&display=swap
      themes:
        green_alert:
          colors:
            oranges:
              picard-darkest-orange: '#d91604'
              picard-dark-orange: '#ef1d10'
              picard-medium-dark-orange: '#e7442a'
              picard-orange: '#ff6753'
              picard-medium-light-orange: '#ff8470'
              picard-light-orange: '#ff977b'
              picard-lightest-orange: '#ffb399'
            grays:
              picard-darkest-gray: '#1e2229'
              picard-dark-gray: '#2f3749'
              picard-medium-dark-gray: '#52596e'
              picard-gray: '#6d748c'
              picard-medium-light-gray: '#9ea5ba'
              picard-light-gray: '#d2d5df'
              picard-lightest-gray: '#f3f4f7'
              picard-moonlight: '#dfe1e8'
            blues:
              picard-darkest-blue: '#002241'
              picard-dark-blue: '#1c3c55'
              picard-medium-dark-blue: '#2a7193'
              picard-blue: '#37a6d1'
              picard-medium-light-blue: '#67caf0'
              picard-light-blue: '#93e1ff'
              picard-lightest-blue: '#00eeee'
            greens:
              picard-darkest-green: '#0c2a15'
              picard-dark-green: '#083717'
              picard-medium-dark-green: '#095320'
              picard-green: '#266239'
              picard-medium-light-green: '#458359'
              picard-light-green: '#80bb93'
              picard-lightest-green: '#b8e0c1'
            yellows:
              picard-darkest-yellow: '#70602c'
              picard-dark-yellow: '#ac943b'
              picard-medium-dark-yellow: '#d2bf50'
              picard-yellow: '#f9ef97'
              picard-medium-light-yellow: '#fffac9'
              picard-light-yellow: '#e7e6de'
              picard-lightest-yellow: '#f5f5dc'
        red_alert:
          colors:
            oranges:
              picard-darkest-orange: '#8b0000'
              picard-dark-orange: '#a52a2a'
              picard-medium-dark-orange: '#b22222'
              picard-orange: '#dc143c'
              picard-medium-light-orange: '#ff0000'
              picard-light-orange: '#ff4500'
              picard-lightest-orange: '#ff6347'
            grays:
              picard-darkest-gray: '#8b0000'
              picard-dark-gray: '#a52a2a'
              picard-medium-dark-gray: '#b22222'
              picard-gray: '#dc143c'
              picard-medium-light-gray: '#ff0000'
              picard-light-gray: '#ff4500'
              picard-lightest-gray: '#ff7f50'
            blues:
              picard-darkest-blue: '#cd5c5c'
              picard-dark-blue: '#f08080'
              picard-medium-dark-blue: '#e9967a'
              picard-blue: '#fa8072'
              picard-medium-light-blue: '#ffa07a'
              picard-light-blue: '#ff6347'
              picard-lightest-blue: '#ff4500'
            greens:
              picard-darkest-green: '#dc143c'
              picard-dark-green: '#b22222'
              picard-medium-dark-green: '#a52a2a'
              picard-green: '#8b0000'
              picard-medium-light-green: '#ff0000'
              picard-light-green: '#ff4500'
              picard-lightest-green: '#ff6347'
            yellows:
              picard-darkest-yellow: '#8b0000'
              picard-dark-yellow: '#a52a2a'
              picard-medium-dark-yellow: '#b22222'
              picard-yellow: '#dc143c'
              picard-medium-light-yellow: '#ff0000'
              picard-light-yellow: '#ff4500'
              picard-lightest-yellow: '#ff6347'
        blue_alert:
          colors:
            oranges:
              picard-darkest-orange: '#00008b'
              picard-dark-orange: '#0000cd'
              picard-medium-dark-orange: '#4169e1'
              picard-orange: '#4682b4'
              picard-medium-light-orange: '#5f9ea0'
              picard-light-orange: '#87ceeb'
              picard-lightest-orange: '#b0e0e6'
            grays:
              picard-darkest-gray: '#1c1c3c'
              picard-dark-gray: '#2a2a5a'
              picard-medium-dark-gray: '#3a3a7a'
              picard-gray: '#4a4a9a'
              picard-medium-light-gray: '#5a5ab4'
              picard-light-gray: '#6a6ad4'
              picard-lightest-gray: '#7a7af4'
            blues:
              picard-darkest-blue: '#00008b'
              picard-dark-blue: '#0000cd'
              picard-medium-dark-blue: '#4169e1'
              picard-blue: '#4682b4'
              picard-medium-light-blue: '#5f9ea0'
              picard-light-blue: '#87ceeb'
              picard-lightest-blue: '#b0e0e6'
            greens:
              picard-darkest-green: '#1c1c3c'
              picard-dark-green: '#2a2a5a'
              picard-medium-dark-green: '#3a3a7a'
              picard-green: '#4a4a9a'
              picard-medium-light-green: '#5a5ab4'
              picard-light-green: '#6a6ad4'
              picard-lightest-green: '#7a7af4'
            yellows:
              picard-darkest-yellow: '#1c1c3c'
              picard-dark-yellow: '#2a2a5a'
              picard-medium-dark-yellow: '#3a3a7a'
              picard-yellow: '#4a4a9a'
              picard-medium-light-yellow: '#5a5ab4'
              picard-light-yellow: '#6a6ad4'
              picard-lightest-yellow: '#7a7af4'
        yellow_alert:
          colors:
            oranges:
              picard-darkest-orange: '#8b4513'
              picard-dark-orange: '#d2691e'
              picard-medium-dark-orange: '#ff8c00'
              picard-orange: '#ffa500'
              picard-medium-light-orange: '#ffb84d'
              picard-light-orange: '#ffd700'
              picard-lightest-orange: '#ffec8b'
            grays:
              picard-darkest-gray: '#4b4b00'
              picard-dark-gray: '#6b6b00'
              picard-medium-dark-gray: '#8b8b00'
              picard-gray: '#abab00'
              picard-medium-light-gray: '#cbcb00'
              picard-light-gray: '#ebeb00'
              picard-lightest-gray: '#fbfb00'
            blues:
              picard-darkest-blue: '#4b4b00'
              picard-dark-blue: '#6b6b00'
              picard-medium-dark-blue: '#8b8b00'
              picard-blue: '#abab00'
              picard-medium-light-blue: '#cbcb00'
              picard-light-blue: '#ebeb00'
              picard-lightest-blue: '#fbfb00'
            greens:
              picard-darkest-green: '#4b4b00'
              picard-dark-green: '#6b6b00'
              picard-medium-dark-green: '#8b8b00'
              picard-green: '#abab00'
              picard-medium-light-green: '#cbcb00'
              picard-light-green: '#ebeb00'
              picard-lightest-green: '#fbfb00'
            yellows:
              picard-darkest-yellow: '#8b4513'
              picard-dark-yellow: '#d2691e'
              picard-medium-dark-yellow: '#ff8c00'
              picard-yellow: '#ffa500'
              picard-medium-light-yellow: '#ffb84d'
              picard-light-yellow: '#ffd700'
              picard-lightest-yellow: '#ffec8b'
        black_alert:
          colors:
            oranges:
              picard-darkest-orange: '#0d0d0d'
              picard-dark-orange: '#1a1a1a'
              picard-medium-dark-orange: '#333333'
              picard-orange: '#4d4d4d'
              picard-medium-light-orange: '#666666'
              picard-light-orange: '#808080'
              picard-lightest-orange: '#999999'
            grays:
              picard-darkest-gray: '#0d0d0d'
              picard-dark-gray: '#1a1a1a'
              picard-medium-dark-gray: '#333333'
              picard-gray: '#4d4d4d'
              picard-medium-light-gray: '#666666'
              picard-light-gray: '#808080'
              picard-lightest-gray: '#999999'
            blues:
              picard-darkest-blue: '#0d0d0d'
              picard-dark-blue: '#1a1a1a'
              picard-medium-dark-blue: '#333333'
              picard-blue: '#4d4d4d'
              picard-medium-light-blue: '#666666'
              picard-light-blue: '#808080'
              picard-lightest-blue: '#999999'
            greens:
              picard-darkest-green: '#0d0d0d'
              picard-dark-green: '#1a1a1a'
              picard-medium-dark-green: '#333333'
              picard-green: '#4d4d4d'
              picard-medium-light-green: '#666666'
              picard-light-green: '#808080'
              picard-lightest-green: '#999999'
            yellows:
              picard-darkest-yellow: '#0d0d0d'
              picard-dark-yellow: '#1a1a1a'
              picard-medium-dark-yellow: '#333333'
              picard-yellow: '#4d4d4d'
              picard-medium-light-yellow: '#666666'
              picard-light-yellow: '#808080'
              picard-lightest-yellow: '#999999'
        gray_alert:
          colors:
            oranges:
              picard-darkest-orange: '#2b2b2b'
              picard-dark-orange: '#3b3b3b'
              picard-medium-dark-orange: '#4b4b4b'
              picard-orange: '#5b5b5b'
              picard-medium-light-orange: '#6b6b6b'
              picard-light-orange: '#7b7b7b'
              picard-lightest-orange: '#8b8b8b'
            grays:
              picard-darkest-gray: '#2b2b2b'
              picard-dark-gray: '#3b3b3b'
              picard-medium-dark-gray: '#4b4b4b'
              picard-gray: '#5b5b5b'
              picard-medium-light-gray: '#6b6b6b'
              picard-light-gray: '#7b7b7b'
              picard-lightest-gray: '#8b8b8b'
            blues:
              picard-darkest-blue: '#2b2b2b'
              picard-dark-blue: '#3b3b3b'
              picard-medium-dark-blue: '#4b4b4b'
              picard-blue: '#5b5b5b'
              picard-medium-light-blue: '#6b6b6b'
              picard-light-blue: '#7b7b7b'
              picard-lightest-blue: '#8b8b8b'
            greens:
              picard-darkest-green: '#2b2b2b'
              picard-dark-green: '#3b3b3b'
              picard-medium-dark-green: '#4b4b4b'
              picard-green: '#5b5b5b'
              picard-medium-light-green: '#6b6b6b'
              picard-light-green: '#7b7b7b'
              picard-lightest-green: '#8b8b8b'
            yellows:
              picard-darkest-yellow: '#2b2b2b'
              picard-dark-yellow: '#3b3b3b'
              picard-medium-dark-yellow: '#4b4b4b'
              picard-yellow: '#5b5b5b'
              picard-medium-light-yellow: '#6b6b6b'
              picard-light-yellow: '#7b7b7b'
              picard-lightest-yellow: '#8b8b8b'

  custom_fields:
    font: |
      [[[
        const link = document.createElement('link'); 
        link.href = variables.__defs.font_url; 
        link.rel = 'stylesheet'; 
        document.head.appendChild(link);
      ]]]

    colors: |
      [[[
        const themes = variables.__defs.themes;
        let alertCondition = 'green'; // Default to 'green'
        if (variables.___helpers && variables.___helpers.alert_condition) {
          alertCondition = states[variables.___helpers.alert_condition].state.toLowerCase() || 'green';
        }
        const selectedTheme = themes[`${alertCondition}_alert`];
        console.debug(variables.__defs.debug_title,'Setting alert condition ${alertCondition}'); 
        const colors = selectedTheme.colors;

        for (const [colorGroup, colorValues] of Object.entries(colors)) {
          for (const [colorName, colorValue] of Object.entries(colorValues)) {
            const cssVarName = `--${colorName}`;
            //if (getComputedStyle(document.documentElement).getPropertyValue(cssVarName).trim()) {
              console.debug(variables.__defs.debug_title,`Setting ${cssVarName}=${colorValue}`);
              document.documentElement.style.setProperty(cssVarName, colorValue);
            //}
          }
        }
      ]]]
  styles:
    custom_fields:
      font:
        - height: 0
        - width: 0
        - visibility: hidden
      colors:
        - height: 0
        - width: 0
        - visibility: hidden
